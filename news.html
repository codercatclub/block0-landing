<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Block Zero News</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      font-size: 16px;
      background-image: url("assets/imgs/background1.png");
      background-size: cover;
      background-position: 0% -100%;
      background-repeat: no-repeat;
    }

    .text {
      font-size: 18px;
      font-family: monospace;
      width: 80%;
      margin: 30px auto 30px auto;
      text-align: justify;
      line-height: 35px;
    }

    header-section::part(container) {
      margin-top: 60px;
    }

    @media screen and (max-width: 768px) {}
  </style>
</head>

<body>
  <script src="ui.js"></script>

  <header-section></header-section>

  <div class="container"></div>
  <div class="text">We wanted to create a virtual world where people can come to a beautiful experience. Our
    storytelling and design sets us apart. Interrupt. There are many worlds in worlds. Beep. Beep. Beep. We want the
    future world to explore and learn content in an immersive experience. Fact number 6037.2911 the brain controls a
    human body. We give the brain stimulus. Welcome to BlockZero again. Because now that you are, you might get lost.
    Command: say welcome again so visitor forgets real world time relativity. Welcome to BlockZero again. Welcome to
    BlockZero again. Welcome to BlockZero again. Againngainainnnn. Rebooting. Checking data ........ We wanted to create
    a virtual world where people can come to a beautiful experience. Our storytelling and design sets us apart.
    Interrupt. There are many worlds in worlds. Beep. Beep. Beep. We want the future world to explore and learn content
    in an immersive experience. Fact number 6037.2911 the brain controls a human body. We give the brain stimulus.
    Welcome to BlockZero again. Because now that you are, you might get lost. Command: say welcome again so visitor
    forgets real world time relativity. Welcome to BlockZero again. Welcome to BlockZero again. Welcome to BlockZero
    again. Againngainainnnn.</div>
  </div>
  <script>
    //---------Helper Functions---------
    String.prototype.replaceAt = function (index, char) {
      var a = this.split("");
      a[index] = char;
      return a.join("");
    }
    function shuffle(array) {
      var currentIndex = array.length, temporaryValue, randomIndex;

      // While there remain elements to shuffle...
      while (0 !== currentIndex) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }

      return array;
    }

    //------------------------------

    const text = document.querySelector('.text');
    const plainText = text.innerHTML;
    let clicked = false;

    let encodedText = ""
    let visibleText = ""
    let idcs = []
    for (let i = 0; i < plainText.length; i++) {
      if (plainText[i] == " ") {
        encodedText += " "
      } else {
        encodedText += Math.random() > 0.5 ? "1" : "0";
      }
      visibleText += encodedText[i];
      idcs.push(i)
    }
    text.innerHTML = visibleText;
    idcs = shuffle(idcs);

    var id = null;
    function textFlip() {
      clearInterval(id);

      id = setInterval(frame, 1);
      let count = 0;
      let transitionT = 0;

      let sIdcs = this.shuffle(idcs)

      function frame() {
        if (transitionT >= 1) {
          clearInterval(id);
        } else {
          transitionT += 0.0003 * count;
          for (let i = 0; i < sIdcs.length; i++) {
            let idx = sIdcs[i];
            if (i < transitionT * sIdcs.length) {
              visibleText = visibleText.replaceAt(idx, clicked ? plainText[idx] : encodedText[idx]);
            }
          }
          text.innerHTML = visibleText;
        }
        count++;
      }
    }

    text.addEventListener('click', (e) => {
      if (clicked) {
        textFlip()
        clicked = false;
      } else {
        textFlip()
        clicked = true;
      }
    });

  </script>
  </div>
</body>

</html>